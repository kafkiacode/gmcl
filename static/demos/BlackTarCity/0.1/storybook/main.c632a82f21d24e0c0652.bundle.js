(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{105:function(module,__webpack_exports__,__webpack_require__){"use strict";var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(0),react__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__),_basics_geometries__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(71);__webpack_exports__.a=Object(react__WEBPACK_IMPORTED_MODULE_0__.memo)(function SimpleCar(){return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_0___default.a.Fragment,null,react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("mesh",{geometry:_basics_geometries__WEBPACK_IMPORTED_MODULE_1__.a,scale:[1,1,1]},react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("meshBasicMaterial",{color:"purple",attach:"material"})),react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("mesh",{geometry:_basics_geometries__WEBPACK_IMPORTED_MODULE_1__.b,scale:[.5,.5,.5],position:[0,0,.5]},react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("meshBasicMaterial",{color:"lightblue",attach:"material"})))})},106:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",function(){return cyberpunkColorsNoBlack});var ramda__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(645),nice_color_palettes__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(307);__webpack_require__.d(__webpack_exports__,"b",function(){return nice_color_palettes__WEBPACK_IMPORTED_MODULE_1__});var palettes=[[131860,5845734,8794854,11743974,14693094],[4022623,6411972,7442828,2438203,2171945],[9762560,16766207,14549158,4653127,0],[63999,14221567,1376e3,16711919,0]],cyberpunkColorsNoBlack=(palettes.map(function(colors){return colors.filter(function(d){return 0!==d})}),Object(ramda__WEBPACK_IMPORTED_MODULE_0__.a)(palettes).filter(function(d){return 0!==d}))},137:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",function(){return Pillar});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(0),react__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__),three__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(1),react_spring__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(41),react_spring__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(640),_basics_geometries__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(71),_scenes_SceneSettings__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(25),Pillar=function Pillar(_ref){var _ref$height=_ref.height,height=void 0===_ref$height?1:_ref$height,_ref$width=_ref.width,width=void 0===_ref$width?50:_ref$width,_ref$position=_ref.position,position=void 0===_ref$position?[0,height/2,0]:_ref$position,_ref$color=_ref.color,color=void 0===_ref$color?"lime":_ref$color,_ref$useTexture=_ref.useTexture,useTexture=void 0!==_ref$useTexture&&_ref$useTexture,texture=Object(react__WEBPACK_IMPORTED_MODULE_0__.useMemo)(function(){return useTexture&&(new three__WEBPACK_IMPORTED_MODULE_1__.TextureLoader).load("./textures/TexturesCom_HighRiseNight0060_M_3.jpg")},[useTexture]);console.log(texture);var offset=Object(react_spring__WEBPACK_IMPORTED_MODULE_2__.c)({from:{offset:[0,0]},to:{offset:[-5,10]},config:{mass:100,friction:1e3}}).offset;return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("mesh",{position:position,scale:[width,height,width],geometry:_basics_geometries__WEBPACK_IMPORTED_MODULE_4__.a},react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("meshBasicMaterial",{attach:"material",color:color},useTexture&&react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_spring__WEBPACK_IMPORTED_MODULE_3__.a.primitive,{attach:"map",object:texture,wrapS:three__WEBPACK_IMPORTED_MODULE_1__.RepeatWrapping,wrapT:three__WEBPACK_IMPORTED_MODULE_1__.RepeatWrapping,repeat:[2.5,5],offset:offset})))},Pillars=function Pillars(){var _useContext=Object(react__WEBPACK_IMPORTED_MODULE_0__.useContext)(_scenes_SceneSettings__WEBPACK_IMPORTED_MODULE_5__.a),palette=_useContext.palette,useTexture=_useContext.useTexture;return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("group",null,react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(Pillar,{useTexture:useTexture,position:[500,150,500],height:300,color:palette[0]}),react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(Pillar,{useTexture:useTexture,position:[500,125,-500],height:250,color:palette[1]}),react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(Pillar,{useTexture:useTexture,position:[-500,175,500],height:350,color:palette[2]}),react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(Pillar,{useTexture:useTexture,position:[-500,75,-500],height:150,color:"lime"}))};__webpack_exports__.b=Pillars,Pillar.__docgenInfo={description:"",methods:[],displayName:"Pillar"},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/design/buildings/Pillars.js"]={name:"Pillar",docgenInfo:Pillar.__docgenInfo,path:"src/design/buildings/Pillars.js"}),Pillars.__docgenInfo={description:"",methods:[],displayName:"Pillars"},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/design/buildings/Pillars.js"]={name:"Pillars",docgenInfo:Pillars.__docgenInfo,path:"src/design/buildings/Pillars.js"})},139:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_exports__.a=function(colorOrNumber){return"number"==typeof colorOrNumber?"#".concat(colorOrNumber.toString(16).padStart(6,"0")):colorOrNumber}},140:function(module,__webpack_exports__,__webpack_require__){"use strict";var _Users_gabri_repos_black_tar_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(26),react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(0),react__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__),three_examples_jsm_loaders_GLTFLoader__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(315);__webpack_exports__.a=Object(react__WEBPACK_IMPORTED_MODULE_1__.memo)(function BladeRunnerCar(){var _useState=Object(react__WEBPACK_IMPORTED_MODULE_1__.useState)(),_useState2=Object(_Users_gabri_repos_black_tar_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__.a)(_useState,2),mesh=_useState2[0],setMesh=_useState2[1];return Object(react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(function(){(new three_examples_jsm_loaders_GLTFLoader__WEBPACK_IMPORTED_MODULE_2__.a).load("./models/blade_runner_car/scene.gltf",function(gltf){gltf.scene.children[0].scale.set(.5,.5,.5),setMesh(gltf.scene.children[0])},console.log,console.error)},[]),mesh?react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("primitive",{object:mesh,position:[0,0,0],rotation:[Math.PI/-2-.2,0,0]}):null})},143:function(module,__webpack_exports__,__webpack_require__){"use strict";var _Users_gabri_repos_black_tar_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(26),react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(0),react__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__),react_three_fiber__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(10),_utils_gui__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(80),DebugCamera=function DebugCamera(_ref){var _ref$initialOn=_ref.initialOn,initialOn=void 0!==_ref$initialOn&&_ref$initialOn,_ref$position=_ref.position,position=void 0===_ref$position?[0,2e3,0]:_ref$position,_ref$target=_ref.target,target=void 0===_ref$target?[0,0,0]:_ref$target,initialOnRef=Object(react__WEBPACK_IMPORTED_MODULE_1__.useRef)(initialOn).current,_useThree=Object(react_three_fiber__WEBPACK_IMPORTED_MODULE_2__.h)(),setDefaultCamera=_useThree.setDefaultCamera,camera=_useThree.camera,_useThree$size=_useThree.size,width=_useThree$size.width,height=_useThree$size.height,_useState=Object(react__WEBPACK_IMPORTED_MODULE_1__.useState)(!1),_useState2=Object(_Users_gabri_repos_black_tar_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__.a)(_useState,2),isCamOvertaken=_useState2[0],setIsCamOvertaken=_useState2[1],isOn=Object(_utils_gui__WEBPACK_IMPORTED_MODULE_3__.a)({addObject:{isOn:initialOnRef}}).isOn,prevCam=Object(react__WEBPACK_IMPORTED_MODULE_1__.useRef)(camera),thisCam=Object(react__WEBPACK_IMPORTED_MODULE_1__.useRef)();return Object(react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(function(){camera!==thisCam.current&&(isCamOvertaken||(prevCam.current=camera))},[camera,isCamOvertaken]),Object(react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(function(){return isOn&&!isCamOvertaken&&(setDefaultCamera(thisCam.current),setIsCamOvertaken(!0)),!isOn&&isCamOvertaken&&(setDefaultCamera(prevCam.current),setIsCamOvertaken(!1)),function(){isCamOvertaken&&setDefaultCamera(prevCam.current)}},[isOn,isCamOvertaken]),Object(react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(function(){thisCam.current.rotation.set(Math.PI/2,Math.PI,0)},[target]),react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("perspectiveCamera",{name:"debugCamera",ref:thisCam,aspect:width/height,position:position,onUpdate:function onUpdate(self){return self.updateProjectionMatrix()},near:1,far:10100})};__webpack_exports__.a=DebugCamera,DebugCamera.__docgenInfo={description:"",methods:[],displayName:"DebugCamera"},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/assistants/DebugCamera.js"]={name:"DebugCamera",docgenInfo:DebugCamera.__docgenInfo,path:"src/assistants/DebugCamera.js"})},144:function(module,__webpack_exports__,__webpack_require__){"use strict";var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(0),react__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__),react_spring_three__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(641),_direction_Loop__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(82),_design_Cars_BladeRunnerCar__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(140),_design_Cars_SimpleCar__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(105),_scenes_SceneSettings__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(25),cars={SimpleCar:_design_Cars_SimpleCar__WEBPACK_IMPORTED_MODULE_4__.a,BladeRunnerCar:_design_Cars_BladeRunnerCar__WEBPACK_IMPORTED_MODULE_3__.a};__webpack_exports__.a=Object(react__WEBPACK_IMPORTED_MODULE_0__.memo)(function Driver(_ref){var children=_ref.children,_useContext=Object(react__WEBPACK_IMPORTED_MODULE_0__.useContext)(_scenes_SceneSettings__WEBPACK_IMPORTED_MODULE_5__.a),cityRadius=_useContext.cityRadius,car=_useContext.car,value=Object(react__WEBPACK_IMPORTED_MODULE_0__.useContext)(_direction_Loop__WEBPACK_IMPORTED_MODULE_2__.a),CarComponent=cars[car]||_design_Cars_SimpleCar__WEBPACK_IMPORTED_MODULE_4__.a;return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_spring_three__WEBPACK_IMPORTED_MODULE_1__.a.group,{position:value.interpolate(function(v){return[cityRadius*Math.cos(v),0,cityRadius*-Math.sin(v)]}),rotation:value.interpolate(function(v){return[0,v+Math.PI,0]})},react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(CarComponent,null),children)})},145:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",function(){return DriverCamera});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(0),react__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__),react_three_fiber__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(10);function DriverCamera(){var _useThree=Object(react_three_fiber__WEBPACK_IMPORTED_MODULE_1__.h)(),_useThree$size=_useThree.size,width=_useThree$size.width,height=_useThree$size.height,setDefaultCamera=_useThree.setDefaultCamera,camera=_useThree.camera,thisCamera=Object(react__WEBPACK_IMPORTED_MODULE_0__.useRef)(),prevCamera=Object(react__WEBPACK_IMPORTED_MODULE_0__.useRef)(camera);return Object(react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(function(){return prevCamera.current=camera,setDefaultCamera(thisCamera.current),function(){setDefaultCamera(prevCamera.current)}},[]),react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("group",{rotation:[0,Math.PI,0],position:[0,1.6,-4]},react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("perspectiveCamera",{near:.001,name:"DriverCamera",ref:thisCamera,aspect:width/height,onUpdate:function onUpdate(self){return self.updateProjectionMatrix()}}))}DriverCamera.__docgenInfo={description:"",methods:[],displayName:"DriverCamera"},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/photography/cameras/DriverCamera.js"]={name:"DriverCamera",docgenInfo:DriverCamera.__docgenInfo,path:"src/photography/cameras/DriverCamera.js"})},146:function(module,__webpack_exports__,__webpack_require__){"use strict";var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(0),react__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__),three__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(1),_scenes_SceneSettings__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(25);__webpack_exports__.a=Object(react__WEBPACK_IMPORTED_MODULE_0__.memo)(function Lights(){var _useContext=Object(react__WEBPACK_IMPORTED_MODULE_0__.useContext)(_scenes_SceneSettings__WEBPACK_IMPORTED_MODULE_2__.a),cityRadius=_useContext.cityRadius,directionalLightsCount=_useContext.lights.directionalLightsCount;return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("group",null,Array(directionalLightsCount).fill().map(function mapDirectionalLights(_ref){var cityRadius=_ref.cityRadius;return function mapFn(_,idx,_ref2){var length=_ref2.length,arcPos=2*Math.PI/length*idx;return{intensity:.2,position:(new three__WEBPACK_IMPORTED_MODULE_1__.Vector3).setFromCylindricalCoords(cityRadius+100,arcPos,20),color:["blue","red"][idx%length]}}}({cityRadius:cityRadius})).map(function(props,key){return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("directionalLight",Object.assign({},props,{key:key}))}),react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("pointLight",{distance:0,decay:1}))})},147:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",function(){return Tunnels});var _Users_gabri_repos_black_tar_node_modules_babel_runtime_helpers_esm_objectWithoutProperties__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(79),react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(0),react__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__),three__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(1),react_three_fiber__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(10),three_meshline__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(322),_scenes_SceneSettings__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(25);function TunnelLightLine(_ref3){var arcStart=_ref3.arcStart,arcLn=_ref3.arcLn,radius=_ref3.radius,height=_ref3.height,material=Object(react__WEBPACK_IMPORTED_MODULE_1__.useRef)();return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("mesh",{position:[0,height,0],rotation:[Math.PI,0,0]},react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("meshLine",{onUpdate:function onUpdate(self){self.parent.geometry=self.geometry}},react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("geometry",{onUpdate:function onUpdate(self){return self.parent.setGeometry(self)}},react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("ellipseCurve",{args:[0,0,radius,radius,arcStart,arcStart+arcLn],onUpdate:function onUpdate(curve){curve.parent.vertices=curve.getPoints(50).map(function(v2){return new three__WEBPACK_IMPORTED_MODULE_2__.Vector3(v2.x,0,v2.y)})}}))),react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("meshLineMaterial",{attach:"material",ref:material,lineWidth:.05,color:16777215}))}function Tunnel(_ref4){var cityRadius=_ref4.cityRadius,radius=_ref4.radius,arcStart=_ref4.arcStart,arcLn=_ref4.arcLn,lightTracksCount=_ref4.lightTracksCount,tunnelProps=Object(_Users_gabri_repos_black_tar_node_modules_babel_runtime_helpers_esm_objectWithoutProperties__WEBPACK_IMPORTED_MODULE_0__.a)(_ref4,["cityRadius","radius","arcStart","arcLn","lightTracksCount"]),lightLineMapFn=Object(react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(function lightLineMapFn(_,idx,_ref5){var length=_ref5.length,angleInTunnel=Math.PI/length*idx+Math.PI/length*.5;return{arcStart:arcStart,arcLn:arcLn,height:.8*radius*Math.sin(angleInTunnel),radius:cityRadius-.9*radius*Math.cos(angleInTunnel)}},[arcLn,arcStart,cityRadius,radius]);return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_1___default.a.Fragment,null,react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("group",null,Array(lightTracksCount).fill().map(lightLineMapFn).map(function(props){return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(TunnelLightLine,props)}),react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("group",{rotation:[Math.PI/-2,0,0]},react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("mesh",Object.assign({},tunnelProps,{rotation:[0,0,arcStart]}),react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("torusBufferGeometry",{attach:"geometry",args:[cityRadius,radius,8,6,arcLn]}),react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("meshBasicMaterial",{color:0,attach:"material",side:three__WEBPACK_IMPORTED_MODULE_2__.DoubleSide})))))}function Tunnels(){var _useContext=Object(react__WEBPACK_IMPORTED_MODULE_1__.useContext)(_scenes_SceneSettings__WEBPACK_IMPORTED_MODULE_5__.a),cityRadius=_useContext.cityRadius,_useContext$tunnels=_useContext.tunnels,radius=_useContext$tunnels.radius,count=_useContext$tunnels.count,lightTracksCount=_useContext$tunnels.lightTracksCount;return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_1___default.a.Fragment,null,Array(count).fill().map(function defaultMapFn(_ref){var cityRadius=_ref.cityRadius,radius=_ref.radius,lightTracksCount=_ref.lightTracksCount;return function mapFn(_,idx,_ref2){var length=_ref2.length;return{radius:radius,cityRadius:cityRadius,arcStart:idx*(2*Math.PI/length),arcLn:Math.PI/16+Math.random()*(Math.PI/16),lightTracksCount:lightTracksCount}}}({cityRadius:cityRadius,radius:radius,lightTracksCount:lightTracksCount})).map(function(props){return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(Tunnel,props)}))}Object(react_three_fiber__WEBPACK_IMPORTED_MODULE_3__.c)(three_meshline__WEBPACK_IMPORTED_MODULE_4__),Tunnels.__docgenInfo={description:"",methods:[],displayName:"Tunnels"},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/design/Tunnels.js"]={name:"Tunnels",docgenInfo:Tunnels.__docgenInfo,path:"src/design/Tunnels.js"})},149:function(module,__webpack_exports__,__webpack_require__){"use strict";var react=__webpack_require__(0),react_default=__webpack_require__.n(react),three_module=__webpack_require__(1),design_SimpleLineAlongTrack=Object(react.memo)(function SimpleLineAlongTrack(_ref){var position=_ref.position,color=_ref.color,curveArgs=_ref.curveArgs;return react_default.a.createElement("line",{position:position},react_default.a.createElement("geometry",{attach:"geometry",onUpdate:function onUpdate(self){self.parent.geometry=self}},react_default.a.createElement("ellipseCurve",{args:curveArgs,onUpdate:function onUpdate(curve){curve.parent.vertices=curve.getPoints(50).map(function(v2){return new three_module.Vector3(v2.x,0,v2.y)})}})),react_default.a.createElement("lineBasicMaterial",{attach:"material",color:color}))}),distanceFromRadius=5,colors=["red","blue","lightblue"];var SceneSettings=__webpack_require__(25);__webpack_exports__.a=Object(react.memo)(function TrainTrack(){var _useContext=Object(react.useContext)(SceneSettings.a),_useContext$cityRadiu=_useContext.cityRadius,cityRadius=void 0===_useContext$cityRadiu?500:_useContext$cityRadiu,_useContext$track$sim=_useContext.track.simpleLinesCount,simpleLinesCount=void 0===_useContext$track$sim?10:_useContext$track$sim;return react_default.a.createElement("group",null,react_default.a.createElement("mesh",{rotation:[Math.PI/2,0,0],position:[0,.2,0]},react_default.a.createElement("ringBufferGeometry",{args:[cityRadius-.2,cityRadius+.2,180,1],attach:"geometry"}),react_default.a.createElement("meshBasicMaterial",{color:16777215,attach:"material",side:three_module.DoubleSide,wireframe:!0})),Array(simpleLinesCount).fill().map(function defaultMapFn(_ref2){var cityRadius=_ref2.cityRadius;return function mapFn(_,idx){var calcRadius=cityRadius+Math.random()*distanceFromRadius-distanceFromRadius/2,arcStart=Math.random()*Math.PI*2,arcLn=arcStart+Math.PI/32+Math.random()*(Math.PI/64);return{position:[0,.2+1.5*Math.random(),0],color:colors[idx%colors.length],curveArgs:[0,0,calcRadius,calcRadius,arcStart,arcLn]}}}({cityRadius:cityRadius})).map(function(props){return react_default.a.createElement(design_SimpleLineAlongTrack,props)}))})},202:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",function(){return basicCitySettings}),__webpack_require__.d(__webpack_exports__,"b",function(){return driveCitySettings});var ramda__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(644),canvas_sketch_util_random__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(52),_art_palettes__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(106),defaultCitySettings={palette:[Object(canvas_sketch_util_random__WEBPACK_IMPORTED_MODULE_1__.pick)(_art_palettes__WEBPACK_IMPORTED_MODULE_2__.b)],bgColor:16777215,cityRadius:10,lights:{directionalLightsCount:4},loop:{duration:25e4,start:!0},isBloomOn:!1,mesoHighRisesCount:40,track:{simpleLinesCount:10},tunnels:{count:0,radius:2.5,lightTracksCount:0},car:"SimpleCar",useTexture:!1},mergeCityWith=Object(ramda__WEBPACK_IMPORTED_MODULE_0__.a)(defaultCitySettings),basicCitySettings=mergeCityWith({}),driveCitySettings=mergeCityWith({bgColor:0,cityRadius:500,palette:[_art_palettes__WEBPACK_IMPORTED_MODULE_2__.a],mesoHighRisesCount:400,track:{simpleLinesCount:250},loop:{duration:6e4,start:!0},tunnels:{count:4,lightTracksCount:5},car:"BladeRunnerCar",useTexture:!0})},203:function(module,__webpack_exports__,__webpack_require__){"use strict";var useStats_stats,react=__webpack_require__(0),react_default=__webpack_require__.n(react),dist=__webpack_require__(10),three_module=__webpack_require__(1),Pillars=__webpack_require__(137),DebugCamera=__webpack_require__(143),Driver=__webpack_require__(144),Loop=__webpack_require__(82),DriverCamera=__webpack_require__(145),Track=__webpack_require__(149),Lights=__webpack_require__(146),SceneSettings=__webpack_require__(25),slicedToArray=__webpack_require__(26),EffectComposer=__webpack_require__(324),RenderPass=__webpack_require__(320),UnrealBloomPass=__webpack_require__(325),stats_min=__webpack_require__(321),stats_min_default=__webpack_require__.n(stats_min);function useStats(){return useStats_stats||(useStats_stats=new stats_min_default.a,document.body.appendChild(useStats_stats.dom)),useStats_stats}function Effects(){var composer=Object(react.useRef)(),_useThree=Object(dist.h)(),gl=_useThree.gl,scene=_useThree.scene,camera=_useThree.camera,_useThree$size=_useThree.size,width=_useThree$size.width,height=_useThree$size.height;Object(react.useEffect)(function(){gl.toneMapping=three_module.ReinhardToneMapping,gl.setClearColor("#000",1),gl.setPixelRatio(window.devicePixelRatio)},[gl]),Object(react.useEffect)(function(){composer.current.setSize(width,height)},[width,height]);var stats=useStats();Object(dist.g)(function(){stats.begin(),composer.current.render(),stats.end()},!0);var _useState=Object(react.useState)(),_useState2=Object(slicedToArray.a)(_useState,2),isBloomOn=_useState2[0],toggleBloom=_useState2[1];return Object(react.useEffect)(function(){requestAnimationFrame(function(){toggleBloom(!1),requestAnimationFrame(function(){return toggleBloom(!0)})})},[camera]),react_default.a.createElement("effectComposer",{ref:composer,args:[gl]},isBloomOn&&react_default.a.createElement("unrealBloomPass",{attachArray:"passes",args:[new three_module.Vector2(width,height)],resolution:[width,height],exposure:1,strengh:1.8,threshold:0,radius:.1,renderToScreen:!0}),react_default.a.createElement("renderPass",{attachArray:"passes",args:[scene,camera]}))}Object(dist.c)({EffectComposer:EffectComposer.a,RenderPass:RenderPass.a,UnrealBloomPass:UnrealBloomPass.a});var art_Effects=Effects;Effects.__docgenInfo={description:"",methods:[],displayName:"Effects"},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/art/Effects.js"]={name:"Effects",docgenInfo:Effects.__docgenInfo,path:"src/art/Effects.js"});var MesoHighRise=__webpack_require__(30),Tunnels=__webpack_require__(147),stringColor=__webpack_require__(139);function SceneWrapper(_ref){var settings=_ref.settings,children=_ref.children;window.THREE=three_module;var stats=useStats(),isBloomOn=settings.isBloomOn,bgColor=settings.bgColor;return Object(dist.g)(function(_ref2){var gl=_ref2.gl,scene=_ref2.scene,camera=_ref2.camera;isBloomOn||(stats.begin(),gl.render(scene,camera),stats.end())},!isBloomOn),Object(react.useEffect)(function(){document.body.style.backgroundColor=Object(stringColor.a)(bgColor)},[bgColor]),react_default.a.createElement(SceneSettings.a.Provider,{value:settings},children)}function City(_ref3){var settings=_ref3.settings,_settings$mesoHighRis=settings.mesoHighRisesCount,mesoHighRisesCount=void 0===_settings$mesoHighRis?1:_settings$mesoHighRis,isBloomOn=settings.isBloomOn,tunnels=settings.tunnels,cityRadius=settings.cityRadius,palette=settings.palette;return console.log(JSON.parse(JSON.stringify(settings))),react_default.a.createElement(SceneWrapper,{settings:settings},react_default.a.createElement(Loop.b,null,react_default.a.createElement(DebugCamera.a,null),react_default.a.createElement(Pillars.b,null),react_default.a.createElement(Driver.a,null,react_default.a.createElement(DriverCamera.a,null)),Array(mesoHighRisesCount).fill().map(Object(MesoHighRise.b)({cityRadius:cityRadius,palette:palette,tunnelRadius:tunnels.radius})).map(function(props){return react_default.a.createElement(MesoHighRise.a,props)}),react_default.a.createElement(Track.a,null),react_default.a.createElement("mesh",{name:"groundPlane",rotation:[Math.PI/2,0,0]},react_default.a.createElement("planeGeometry",{args:[1e4,1e4],attach:"geometry"}),react_default.a.createElement("meshBasicMaterial",{color:8,attach:"material",side:three_module.DoubleSide})),react_default.a.createElement(Lights.a,null),isBloomOn&&react_default.a.createElement(art_Effects,null),react_default.a.createElement("ambientLight",{color:"#59314f",intensity:.4}),react_default.a.createElement(Tunnels.a,null)))}__webpack_require__.d(__webpack_exports__,"a",function(){return SceneWrapper});__webpack_exports__.b=City;SceneWrapper.__docgenInfo={description:"",methods:[],displayName:"SceneWrapper"},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/scenes/City.js"]={name:"SceneWrapper",docgenInfo:SceneWrapper.__docgenInfo,path:"src/scenes/City.js"}),City.__docgenInfo={description:"",methods:[],displayName:"City"},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/scenes/City.js"]={name:"City",docgenInfo:City.__docgenInfo,path:"src/scenes/City.js"})},25:function(module,__webpack_exports__,__webpack_require__){"use strict";var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(0),SceneSettings=Object(react__WEBPACK_IMPORTED_MODULE_0__.createContext)({});__webpack_exports__.a=SceneSettings},29:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"b",function(){return addPointLights}),__webpack_require__.d(__webpack_exports__,"c",function(){return liftCamera}),__webpack_require__.d(__webpack_exports__,"a",function(){return addOrbitControls});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(0),react__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__),react_three_fiber__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(10),three_examples_jsm_controls_OrbitControls__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(316),_utils_gui__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(80);Object(react_three_fiber__WEBPACK_IMPORTED_MODULE_1__.e)({OrbitControls:three_examples_jsm_controls_OrbitControls__WEBPACK_IMPORTED_MODULE_2__.a});var addPointLights=function addPointLights(){return function(storyFn){return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_0___default.a.Fragment,null,react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("pointLight",{position:[13,13,13]}),react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("pointLight",{position:[-13,13,-13]}),storyFn())}},liftCamera=function liftCamera(){return function(storyFn){return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_0___default.a.Fragment,null,storyFn())}};function Wrapper(_ref){var children=_ref.children,_useThree=Object(react_three_fiber__WEBPACK_IMPORTED_MODULE_1__.h)(),camera=_useThree.camera,gl=_useThree.gl,autoRotate=Object(_utils_gui__WEBPACK_IMPORTED_MODULE_3__.a)({addObject:{autoRotate:!0}},"Storybook").autoRotate,orbit=Object(react__WEBPACK_IMPORTED_MODULE_0__.useRef)();return Object(react_three_fiber__WEBPACK_IMPORTED_MODULE_1__.g)(function(){return orbit.current.update()}),react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_0___default.a.Fragment,null,react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("ambientLight",{intensity:.1}),react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("orbitControls",{ref:orbit,args:[camera,gl.domElement],enableDamping:!0,dampingFactor:.1,autoRotate:autoRotate}),children)}var addOrbitControls=function addOrbitControls(){return function(storyFn){return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(Wrapper,null,storyFn())}}},30:function(module,__webpack_exports__,__webpack_require__){"use strict";var slicedToArray=__webpack_require__(26),objectWithoutProperties=__webpack_require__(79),react=__webpack_require__(0),react_default=__webpack_require__.n(react),canvas_sketch_util_color=__webpack_require__(200),random=__webpack_require__(52),geometries=__webpack_require__(71);function getRandomScale(steps){var variation=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return function getScale(){var total=0,acc=0;return Array(steps).fill().map(function(){var d=1+Math.random()*variation-variation/2;return total+=d,d}).map(function(d){return acc+=d/total})}}var stringColor=__webpack_require__(139);__webpack_require__.d(__webpack_exports__,"b",function(){return defaultMapFn});var defaultMaterialAttrs={color:"blue"};function defaultMapFn(_ref){var cityRadius=_ref.cityRadius,tunnelRadius=_ref.tunnelRadius,palette=_ref.palette;return function mapFn(_,idx,_ref2){var length=_ref2.length,segmentAngle=2*Math.PI/length*idx,displacement=50*Math.random()-25;return displacement+=(displacement>0?1:-1)*(tunnelRadius+2),{hslVariation:.1,heightVariation:1,xzVariation:2,steps:10,height:5+10*Math.random(),base:2,key:idx,color:palette[idx%palette.length],position:[(cityRadius+displacement)*Math.cos(segmentAngle),0,(cityRadius+displacement)*-Math.sin(segmentAngle)]}}}__webpack_exports__.a=Object(react.memo)(function MesoHighRise(_ref3){var _ref3$height=_ref3.height,height=void 0===_ref3$height?10:_ref3$height,_ref3$base=_ref3.base,base=void 0===_ref3$base?2:_ref3$base,_ref3$steps=_ref3.steps,steps=void 0===_ref3$steps?3:_ref3$steps,_ref3$heightVariation=_ref3.heightVariation,heightVariation=void 0===_ref3$heightVariation?0:_ref3$heightVariation,_ref3$xzVariation=_ref3.xzVariation,xzVariation=void 0===_ref3$xzVariation?0:_ref3$xzVariation,_ref3$hslVariation=_ref3.hslVariation,hslVariation=void 0===_ref3$hslVariation?0:_ref3$hslVariation,color=_ref3.color,props=Object(objectWithoutProperties.a)(_ref3,["height","base","steps","heightVariation","xzVariation","hslVariation","color"]),_useState=Object(react.useState)(function getRandomWeights(steps){var variation=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return function getWeights(){for(var total=0,variations=[],i=0;i<steps;i++)variations[i]=1+Math.random()*variation-variation/2,total+=variations[i];return variations.map(function(v){return v/total})}}(steps,heightVariation)),heightVariations=Object(slicedToArray.a)(_useState,1)[0],_useState3=Object(react.useState)(getRandomScale(steps,xzVariation)),sxVariations=Object(slicedToArray.a)(_useState3,1)[0],_useState5=Object(react.useState)(getRandomScale(steps,xzVariation)),szVariations=Object(slicedToArray.a)(_useState5,1)[0],_useState7=Object(react.useState)(getRandomScale(steps,xzVariation)),pxVariations=Object(slicedToArray.a)(_useState7,1)[0],_useState9=Object(react.useState)(getRandomScale(steps,xzVariation)),pzVariations=Object(slicedToArray.a)(_useState9,1)[0];return react_default.a.createElement("group",Object.assign({name:"MesoHighRise"},props),Array(steps).fill().map(function(_,idx){var stepBaseX=(1-(sxVariations[idx-1]||0))*base,stepBaseZ=(1-(szVariations[idx-1]||0))*base,stepBasePosX=(1/steps*idx-(pxVariations[idx-1]||0))*base,stepBasePosZ=(1/steps*idx-(pzVariations[idx-1]||0))*base,stepHeight=heightVariations[idx]*height*(idx+1),newColor=Object(canvas_sketch_util_color.offsetHSL)(Object(canvas_sketch_util_color.parse)(Object(stringColor.a)(color)),Object(random.value)()*Object(random.sign)()*hslVariation*.5*360,Object(random.value)()*Object(random.sign)()*hslVariation*100,Object(random.value)()*Object(random.sign)()*hslVariation*100).hex;return react_default.a.createElement("mesh",{key:idx,position:[stepBasePosX,stepHeight/2,stepBasePosZ],geometry:geometries.a,scale:[stepBaseX,stepHeight,stepBaseZ]},react_default.a.createElement("meshLambertMaterial",Object.assign({attach:"material"},defaultMaterialAttrs,{color:newColor})))}))})},314:function(module,__webpack_exports__,__webpack_require__){"use strict";(function(module){var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(0),react__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__),_storybook_react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(28),_design_buildings_Pillars__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(137),_design_buildings_MesoHighRise__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(30),_design_Cars_BladeRunnerCar__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(140),_design_Cars_SimpleCar__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(105),_decorators__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(29),withStorySource=__webpack_require__(298).withStorySource,__STORY__="import React from 'react';\nimport { storiesOf } from '@storybook/react';\nimport { Pillar } from '../design/buildings/Pillars';\nimport MesoHighRise from '../design/buildings/MesoHighRise';\nimport BladeRunnerCar from '../design/Cars/BladeRunnerCar';\nimport SimpleCar from '../design/Cars/SimpleCar';\nimport { liftCamera, addPointLights, addOrbitControls } from './decorators';\n\nexport default function() {\n  storiesOf('City|Buildings/Pillar', module)\n    .addDecorator(addPointLights())\n    .addDecorator(liftCamera())\n    .addDecorator(addOrbitControls())\n    .add('default', () => <Pillar width={1} height={2} />);\n\n  storiesOf('City|Buildings/MesoHighRise', module)\n    .addDecorator(addPointLights())\n    .addDecorator(liftCamera())\n    .addDecorator(addOrbitControls())\n    .add('default', () => (\n      <>\n        <directionalLight />\n        <MesoHighRise color=\"blue\" height={3} base={0.6} />\n      </>\n    ))\n    .add('heightVariation = 0.5', () => (\n      <>\n        <pointLight position={[3, 3, 3]} />\n        <MesoHighRise\n          color=\"lime\"\n          height={3}\n          base={0.6}\n          heightVariation={0.5}\n          steps={10}\n        />\n      </>\n    ))\n    .add('xzVariation = 0.5', () => (\n      <>\n        <pointLight position={[3, 3, 3]} />\n        <MesoHighRise\n          color=\"lime\"\n          height={3}\n          base={3}\n          steps={3}\n          xzVariation={1.7}\n        />\n      </>\n    ))\n    .add('xzVariation = 0', () => (\n      <>\n        <pointLight position={[3, 3, 3]} />\n        <MesoHighRise color=\"lime\" height={3} base={1} steps={3} />\n      </>\n    ))\n    .add('many variations', () => (\n      <>\n        <pointLight position={[3, 3, 3]} />\n        {Array(5)\n          .fill()\n          .map((_, x) => (\n            <>\n              {Array(5)\n                .fill()\n                .map((__, z) => (\n                  <MesoHighRise\n                    color=\"lime\"\n                    height={3}\n                    base={0.7}\n                    steps={15}\n                    heightVariation={0.8}\n                    xzVariation={2.7}\n                    position={[x, 0, z]}\n                  />\n                ))}\n            </>\n          ))}\n      </>\n    ));\n\n  storiesOf('City|Vehicles/SimpleCar', module)\n    .addDecorator(addPointLights())\n    .addDecorator(liftCamera())\n    .addDecorator(addOrbitControls())\n\n    .add('default', () => <SimpleCar />);\n\n  storiesOf('City|Vehicles/BladeRunnerCar', module)\n    .addDecorator(addPointLights())\n    .addDecorator(liftCamera())\n    .addDecorator(addOrbitControls())\n    .add('default', () => <BladeRunnerCar />);\n}\n",__ADDS_MAP__={"city-buildings-pillar--default":{startLoc:{col:9,line:14},endLoc:{col:57,line:14}},"city-buildings-mesohighrise--many-variations":{startLoc:{col:9,line:56},endLoc:{col:5,line:79}},"city-buildings-mesohighrise--xzvariation-0":{startLoc:{col:9,line:50},endLoc:{col:5,line:55}},"city-buildings-mesohighrise--xzvariation-0-5":{startLoc:{col:9,line:38},endLoc:{col:5,line:49}},"city-buildings-mesohighrise--heightvariation-0-5":{startLoc:{col:9,line:26},endLoc:{col:5,line:37}},"city-buildings-mesohighrise--default":{startLoc:{col:9,line:20},endLoc:{col:5,line:25}},"city-vehicles-simplecar--default":{startLoc:{col:9,line:86},endLoc:{col:39,line:86}},"city-vehicles-bladerunnercar--default":{startLoc:{col:9,line:92},endLoc:{col:44,line:92}}};__webpack_exports__.a=function(){Object(_storybook_react__WEBPACK_IMPORTED_MODULE_1__.storiesOf)("City|Buildings/Pillar",module).addDecorator(withStorySource(__STORY__,__ADDS_MAP__)).addDecorator(Object(_decorators__WEBPACK_IMPORTED_MODULE_6__.b)()).addDecorator(Object(_decorators__WEBPACK_IMPORTED_MODULE_6__.c)()).addDecorator(Object(_decorators__WEBPACK_IMPORTED_MODULE_6__.a)()).add("default",function(){return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_design_buildings_Pillars__WEBPACK_IMPORTED_MODULE_2__.a,{width:1,height:2})}),Object(_storybook_react__WEBPACK_IMPORTED_MODULE_1__.storiesOf)("City|Buildings/MesoHighRise",module).addDecorator(withStorySource(__STORY__,__ADDS_MAP__)).addDecorator(Object(_decorators__WEBPACK_IMPORTED_MODULE_6__.b)()).addDecorator(Object(_decorators__WEBPACK_IMPORTED_MODULE_6__.c)()).addDecorator(Object(_decorators__WEBPACK_IMPORTED_MODULE_6__.a)()).add("default",function(){return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_0___default.a.Fragment,null,react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("directionalLight",null),react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_design_buildings_MesoHighRise__WEBPACK_IMPORTED_MODULE_3__.a,{color:"blue",height:3,base:.6}))}).add("heightVariation = 0.5",function(){return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_0___default.a.Fragment,null,react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("pointLight",{position:[3,3,3]}),react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_design_buildings_MesoHighRise__WEBPACK_IMPORTED_MODULE_3__.a,{color:"lime",height:3,base:.6,heightVariation:.5,steps:10}))}).add("xzVariation = 0.5",function(){return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_0___default.a.Fragment,null,react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("pointLight",{position:[3,3,3]}),react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_design_buildings_MesoHighRise__WEBPACK_IMPORTED_MODULE_3__.a,{color:"lime",height:3,base:3,steps:3,xzVariation:1.7}))}).add("xzVariation = 0",function(){return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_0___default.a.Fragment,null,react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("pointLight",{position:[3,3,3]}),react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_design_buildings_MesoHighRise__WEBPACK_IMPORTED_MODULE_3__.a,{color:"lime",height:3,base:1,steps:3}))}).add("many variations",function(){return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_0___default.a.Fragment,null,react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("pointLight",{position:[3,3,3]}),Array(5).fill().map(function(_,x){return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_0___default.a.Fragment,null,Array(5).fill().map(function(__,z){return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_design_buildings_MesoHighRise__WEBPACK_IMPORTED_MODULE_3__.a,{color:"lime",height:3,base:.7,steps:15,heightVariation:.8,xzVariation:2.7,position:[x,0,z]})}))}))}),Object(_storybook_react__WEBPACK_IMPORTED_MODULE_1__.storiesOf)("City|Vehicles/SimpleCar",module).addDecorator(withStorySource(__STORY__,__ADDS_MAP__)).addDecorator(Object(_decorators__WEBPACK_IMPORTED_MODULE_6__.b)()).addDecorator(Object(_decorators__WEBPACK_IMPORTED_MODULE_6__.c)()).addDecorator(Object(_decorators__WEBPACK_IMPORTED_MODULE_6__.a)()).add("default",function(){return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_design_Cars_SimpleCar__WEBPACK_IMPORTED_MODULE_5__.a,null)}),Object(_storybook_react__WEBPACK_IMPORTED_MODULE_1__.storiesOf)("City|Vehicles/BladeRunnerCar",module).addDecorator(withStorySource(__STORY__,__ADDS_MAP__)).addDecorator(Object(_decorators__WEBPACK_IMPORTED_MODULE_6__.b)()).addDecorator(Object(_decorators__WEBPACK_IMPORTED_MODULE_6__.c)()).addDecorator(Object(_decorators__WEBPACK_IMPORTED_MODULE_6__.a)()).add("default",function(){return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_design_Cars_BladeRunnerCar__WEBPACK_IMPORTED_MODULE_4__.a,null)})}}).call(this,__webpack_require__(164)(module))},318:function(module,__webpack_exports__,__webpack_require__){"use strict";(function(module){__webpack_require__(72);var react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(0),react__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__),ramda__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(643),_storybook_react__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(28),three__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(1),_scenes_City__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(203),_scenes_citySettings__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(202),_utils_gui__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(80),_direction_Loop__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(82),_design_Tunnels__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(147),_actors_Driver__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(144),_photography_cameras_DriverCamera__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(145),_art_palettes__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__(106),_photography_Lights__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__(146),_assistants_DebugCamera__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__(143),_design_Track__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__(149),_design_buildings_MesoHighRise__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__(30);var withStorySource=__webpack_require__(298).withStorySource,__STORY__="import React from 'react';\nimport { compose } from 'ramda';\nimport { storiesOf } from '@storybook/react';\nimport { DoubleSide } from 'three';\nimport City, { SceneWrapper } from '../scenes/City';\nimport { basicCitySettings, driveCitySettings } from '../scenes/citySettings';\nimport { withGui } from '../utils/gui';\nimport Loop from '../direction/Loop';\nimport Tunnels from '../design/Tunnels';\nimport Driver from '../actors/Driver';\nimport DriverCamera from '../photography/cameras/DriverCamera';\nimport { niceColorPalettes } from '../art/palettes';\nimport Lights from '../photography/Lights';\nimport DebugCamera from '../assistants/DebugCamera';\nimport Track from '../design/Track';\nimport MesoHighRise, {\n  defaultMapFn as defaultMesoHighRiseMapFn,\n} from '../design/buildings/MesoHighRise';\n\nconst CityWithGui = withGui()(City);\n\nfunction addRandomRotation(item) {\n  return {\n    ...item,\n    rotation: [Math.random() * Math.PI, 0, Math.random() * Math.PI],\n  };\n}\n\nexport default function() {\n  storiesOf('Scene|Cities/Basic', module).add('default', () => (\n    <CityWithGui settings={basicCitySettings} />\n  ));\n\n  storiesOf('Scene|Cities/Custom', module).add('default', () => {\n    const settings = {\n      palette: niceColorPalettes[7],\n      bgColor: 0xffffff,\n      cityRadius: 25,\n      lights: {\n        directionalLightsCount: 4,\n      },\n      loop: { duration: 600000, start: true },\n      isBloomOn: false,\n      mesoHighRisesCount: 120,\n      track: { simpleLinesCount: 10 },\n      tunnels: {\n        count: 0,\n        radius: 1.5,\n        lightTracksCount: 0,\n      },\n      car: 'SimpleCar',\n    };\n    return (\n      <SceneWrapper settings={settings}>\n        <Loop>\n          <DebugCamera />\n          <Tunnels />\n          <Driver>\n            <DriverCamera />\n          </Driver>\n          <Lights />\n          <Track />\n          {Array(settings.mesoHighRisesCount)\n            .fill()\n            .map(\n              compose(\n                // addRandomRotation,\n                defaultMesoHighRiseMapFn({\n                  cityRadius: settings.cityRadius,\n                  palette: settings.palette,\n                  tunnelRadius: settings.tunnels.radius,\n                }),\n              ),\n            )\n            .map((props) => (\n              <MesoHighRise {...props} />\n            ))}\n          <mesh name=\"groundPlane\" rotation={[Math.PI / 2, 0, 0]}>\n            <planeGeometry args={[10000, 10000]} attach=\"geometry\" />\n            <meshBasicMaterial\n              color={0x000008}\n              attach=\"material\"\n              side={DoubleSide}\n            />\n          </mesh>\n          <ambientLight color=\"#59314f\" intensity={0.4} />\n        </Loop>\n      </SceneWrapper>\n    );\n  });\n\n  storiesOf('Scene|Cities/Drive', module).add('default', () => (\n    <CityWithGui settings={driveCitySettings} />\n  ));\n}\n",__ADDS_MAP__={"scene-cities-basic--default":{startLoc:{col:46,line:30},endLoc:{col:3,line:32}},"scene-cities-custom--default":{startLoc:{col:47,line:34},endLoc:{col:3,line:90}},"scene-cities-drive--default":{startLoc:{col:46,line:92},endLoc:{col:3,line:94}}},CityWithGui=Object(_utils_gui__WEBPACK_IMPORTED_MODULE_7__.b)()(_scenes_City__WEBPACK_IMPORTED_MODULE_5__.b);__webpack_exports__.a=function(){Object(_storybook_react__WEBPACK_IMPORTED_MODULE_3__.storiesOf)("Scene|Cities/Basic",module).addDecorator(withStorySource(__STORY__,__ADDS_MAP__)).add("default",function(){return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(CityWithGui,{settings:_scenes_citySettings__WEBPACK_IMPORTED_MODULE_6__.a})}),Object(_storybook_react__WEBPACK_IMPORTED_MODULE_3__.storiesOf)("Scene|Cities/Custom",module).addDecorator(withStorySource(__STORY__,__ADDS_MAP__)).add("default",function(){var settings={palette:_art_palettes__WEBPACK_IMPORTED_MODULE_12__.b[7],bgColor:16777215,cityRadius:25,lights:{directionalLightsCount:4},loop:{duration:6e5,start:!0},isBloomOn:!1,mesoHighRisesCount:120,track:{simpleLinesCount:10},tunnels:{count:0,radius:1.5,lightTracksCount:0},car:"SimpleCar"};return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_scenes_City__WEBPACK_IMPORTED_MODULE_5__.a,{settings:settings},react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_direction_Loop__WEBPACK_IMPORTED_MODULE_8__.b,null,react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_assistants_DebugCamera__WEBPACK_IMPORTED_MODULE_14__.a,null),react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_design_Tunnels__WEBPACK_IMPORTED_MODULE_9__.a,null),react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_actors_Driver__WEBPACK_IMPORTED_MODULE_10__.a,null,react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_photography_cameras_DriverCamera__WEBPACK_IMPORTED_MODULE_11__.a,null)),react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_photography_Lights__WEBPACK_IMPORTED_MODULE_13__.a,null),react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_design_Track__WEBPACK_IMPORTED_MODULE_15__.a,null),Array(settings.mesoHighRisesCount).fill().map(Object(ramda__WEBPACK_IMPORTED_MODULE_2__.a)(Object(_design_buildings_MesoHighRise__WEBPACK_IMPORTED_MODULE_16__.b)({cityRadius:settings.cityRadius,palette:settings.palette,tunnelRadius:settings.tunnels.radius}))).map(function(props){return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_design_buildings_MesoHighRise__WEBPACK_IMPORTED_MODULE_16__.a,props)}),react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("mesh",{name:"groundPlane",rotation:[Math.PI/2,0,0]},react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("planeGeometry",{args:[1e4,1e4],attach:"geometry"}),react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("meshBasicMaterial",{color:8,attach:"material",side:three__WEBPACK_IMPORTED_MODULE_4__.DoubleSide})),react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("ambientLight",{color:"#59314f",intensity:.4})))}),Object(_storybook_react__WEBPACK_IMPORTED_MODULE_3__.storiesOf)("Scene|Cities/Drive",module).addDecorator(withStorySource(__STORY__,__ADDS_MAP__)).add("default",function(){return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(CityWithGui,{settings:_scenes_citySettings__WEBPACK_IMPORTED_MODULE_6__.b})})}}).call(this,__webpack_require__(164)(module))},327:function(module,exports,__webpack_require__){__webpack_require__(328),__webpack_require__(439),module.exports=__webpack_require__(440)},440:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),function(module){var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(0),react__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__),_storybook_react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(28),_storybook_theming__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(308),react_three_fiber__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(10);Object(_storybook_react__WEBPACK_IMPORTED_MODULE_1__.addDecorator)(function(storyFn){return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_three_fiber__WEBPACK_IMPORTED_MODULE_3__.a,{camera:{name:"CanvasCamera"},onCreated:function onCreated(_ref){var scene=_ref.scene;window.scene=scene}},storyFn())}),Object(_storybook_react__WEBPACK_IMPORTED_MODULE_1__.addParameters)({options:{theme:_storybook_theming__WEBPACK_IMPORTED_MODULE_2__.themes.dark,showPanel:!0,panelPosition:"right"}}),Object(_storybook_react__WEBPACK_IMPORTED_MODULE_1__.configure)(function loadStories(){__webpack_require__(623)},module)}.call(this,__webpack_require__(164)(module))},623:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__(624);var _cityDesignElements__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(314),_cities__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(318);Object(_cityDesignElements__WEBPACK_IMPORTED_MODULE_1__.a)(),Object(_cities__WEBPACK_IMPORTED_MODULE_2__.a)()},624:function(module,exports,__webpack_require__){},71:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",function(){return box}),__webpack_require__.d(__webpack_exports__,"b",function(){return sphere});var three__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(1),box=new three__WEBPACK_IMPORTED_MODULE_0__.BoxBufferGeometry,sphere=new three__WEBPACK_IMPORTED_MODULE_0__.SphereBufferGeometry},80:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",function(){return useGui}),__webpack_require__.d(__webpack_exports__,"b",function(){return withGui});var gui,_Users_gabri_repos_black_tar_node_modules_babel_runtime_helpers_esm_objectWithoutProperties__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(79),_Users_gabri_repos_black_tar_node_modules_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(323),_Users_gabri_repos_black_tar_node_modules_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(72),_Users_gabri_repos_black_tar_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(26),react__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(0),react__WEBPACK_IMPORTED_MODULE_4___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_4__),dat_gui__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(317),ramda__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(642);function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable})),keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(source,!0).forEach(function(key){Object(_Users_gabri_repos_black_tar_node_modules_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__.a)(target,key,source[key])}):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(source).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))})}return target}var folders={};function useGui(_ref){var attr=_ref.attr,_ref$addObject=_ref.addObject,addObject=void 0===_ref$addObject?{}:_ref$addObject,_ref$colorObject=_ref.colorObject,colorObject=void 0===_ref$colorObject?{}:_ref$colorObject,folderName=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Controls";gui||(gui=new dat_gui__WEBPACK_IMPORTED_MODULE_5__.a(attr));var _useState=Object(react__WEBPACK_IMPORTED_MODULE_4__.useState)(function(){return _objectSpread({},Object(ramda__WEBPACK_IMPORTED_MODULE_6__.a)(function(v){return Array.isArray(v)?v[0]:v},addObject),{},colorObject)}),_useState2=Object(_Users_gabri_repos_black_tar_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_3__.a)(_useState,2),trackObj=_useState2[0],setTrackObj=_useState2[1];return Object(react__WEBPACK_IMPORTED_MODULE_4__.useEffect)(function(){folders[folderName]||(folders[folderName]=gui.addFolder(folderName));var folder=folders[folderName];Object.keys(addObject).filter(function(k){return["number","string","boolean"].includes(typeof addObject[k])}).forEach(function(key){folder.add.apply(folder,[trackObj,key].concat(Object(_Users_gabri_repos_black_tar_node_modules_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_1__.a)(Array.isArray(addObject[key])?addObject[key].slice(1):[]))).onChange(function(value){return setTrackObj(function(prev){return _objectSpread({},prev,Object(_Users_gabri_repos_black_tar_node_modules_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__.a)({},key,value))})})}),Object.keys(colorObject).forEach(function(key){gui.addColor(trackObj,key).onChange(function(value){return setTrackObj(function(prev){return _objectSpread({},prev,Object(_Users_gabri_repos_black_tar_node_modules_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__.a)({},key,value))})})})},[]),_objectSpread({gui:gui},trackObj)}function withGui(){var _ref2$settingsKey=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).settingsKey,settingsKey=void 0===_ref2$settingsKey?"settings":_ref2$settingsKey;return function WithGuiHoc(Component){function WithGuiComponent(_ref3){var settings=_ref3.settings,props=Object(_Users_gabri_repos_black_tar_node_modules_babel_runtime_helpers_esm_objectWithoutProperties__WEBPACK_IMPORTED_MODULE_0__.a)(_ref3,["settings"]),guiSettings=useGui({addObject:settings},Component.name||Component.displayName),passedProps=_objectSpread({},props,Object(_Users_gabri_repos_black_tar_node_modules_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__.a)({},settingsKey,guiSettings));return react__WEBPACK_IMPORTED_MODULE_4___default.a.createElement(Component,passedProps)}return WithGuiComponent.displayName="withGui(".concat(Component.name||Component.displayName,")"),WithGuiComponent}}},82:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",function(){return LoopContext});var _Users_gabri_repos_black_tar_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(201),_Users_gabri_repos_black_tar_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_Users_gabri_repos_black_tar_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__),_Users_gabri_repos_black_tar_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(319),react__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(0),react__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_2__),react_spring_three__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(41),_scenes_SceneSettings__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(25),LoopContext=Object(react__WEBPACK_IMPORTED_MODULE_2__.createContext)();__webpack_exports__.b=Object(react__WEBPACK_IMPORTED_MODULE_2__.memo)(function Loop(_ref){var _to,children=_ref.children,_useContext$loop=Object(react__WEBPACK_IMPORTED_MODULE_2__.useContext)(_scenes_SceneSettings__WEBPACK_IMPORTED_MODULE_4__.a).loop,duration=_useContext$loop.duration,start=_useContext$loop.start,spring=Object(react_spring_three__WEBPACK_IMPORTED_MODULE_3__.c)({to:(_to=Object(_Users_gabri_repos_black_tar_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__.a)(_Users_gabri_repos_black_tar_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee(next){return _Users_gabri_repos_black_tar_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:if(start){_context.next=2;break}return _context.abrupt("return");case 2:return _context.next=4,next({angle:2*Math.PI});case 4:return _context.next=7,next({angle:2*Math.PI,reset:!0});case 7:_context.next=4;break;case 9:case"end":return _context.stop()}},_callee)})),function to(_x){return _to.apply(this,arguments)}),from:{angle:0},config:{duration:duration}});return react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(LoopContext.Provider,{value:spring.angle},children)})}},[[327,1,2]]]);
//# sourceMappingURL=main.c632a82f21d24e0c0652.bundle.js.map